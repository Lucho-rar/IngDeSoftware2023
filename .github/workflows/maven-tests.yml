name: testssss

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  mi-trabajo:
    runs-on: ubuntu-latest
    outputs:
      id: ${{ steps.set-dr.outputs.id }}
    steps:
    - name: Inicio
      run: echo "Estoy variando la flag"
    - name: Test cluster use
      run: |
          if [ "$DR" -eq "1" ]; then
          echo "La bandera es 1, realiza acciones basadas en esto."
          # Realiza acciones basadas en la bandera
          else
          echo "La bandera es 0, ejecuta acciones alternativas."
          # Realiza acciones alternativas
          fi
    - name: Cambiar valor
      id: set-dr
      run: |
          echo "DR=1" >> $GITHUB_ENV
          echo "::set-output name=id::1"

  otro-trabajo:
    needs: mi-trabajo
    runs-on: ubuntu-latest
    steps:
    - name: Obtener valor DR
      run: echo "El valor de DR es ${{ needs.mi-trabajo.outputs.id }}"